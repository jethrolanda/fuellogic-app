import*as e from"@wordpress/interactivity";var t={d:(e,s)=>{for(var d in s)t.o(s,d)&&!t.o(e,d)&&Object.defineProperty(e,d,{enumerable:!0,get:s[d]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const s=(i={getElement:()=>e.getElement,store:()=>e.store},a={},t.d(a,i),a),{state:d}=(0,s.store)("fuellogic-app",{state:{get isSitesEmpty(){return d.sites.length<=0},get modalHeading(){switch(d.action){case"add-site":default:return"Add new site";case"edit-site":return"Edit site"}},get siteName(){return"add-site"==d.action?"":d.selectedSite.name},get siteAddress(){return"add-site"==d.action?"":d.selectedSite.address},get siteDeliverySchedule(){return"add-site"==d.action?"":d.selectedSite.delivery_schedule},get siteDeliveryNotes(){return"add-site"==d.action?"":d.selectedSite.delivery_notes}},actions:{*submitForm(e){e.preventDefault();const{ref:t}=(0,s.getElement)(),i=new FormData(t);i.append("action","add-site"==d.action?"add_site":"update_site"),i.append("nonce",d.nonce);const a=yield fetch(d.ajaxUrl,{method:"POST",body:i}).then((e=>e.json()));d.sites=a.data},*deleteSite(){if(confirm("Are you sure?")){const e=new FormData;e.append("action","delete_site"),e.append("nonce",d.nonce),e.append("id",d.selectedSiteId);const t=yield fetch(d.ajaxUrl,{method:"POST",body:e}).then((e=>e.json()));d.sites=t.data}}},callbacks:{openModal:()=>{const{ref:e}=(0,s.getElement)();d.action=e.dataset.action,document.getElementById("myModal").style.display="block",console.log(d.selectedSite)},closeModal:()=>{document.getElementById("myModal").style.display="none"},selectSite:()=>{const{ref:e}=(0,s.getElement)();document.querySelectorAll("ul#sites-list li").forEach((e=>{e.classList.remove("selected")})),e.classList.add("selected");const t=d.sites.filter((t=>parseInt(t.id)===parseInt(e.id)));d.selectedSiteId=e.id,d.selectedSite=t.length?t[0]:""},sortSites:()=>{d.sorted?d.sites=d.sites.reverse():(d.sites=d.sites.sort(((e,t)=>e?.name.localeCompare(t?.name))),d.sorted=!0)}}});var i,a;