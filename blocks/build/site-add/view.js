import*as t from"@wordpress/interactivity";var e={d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const n=t=>{if(t instanceof FormData==0)return!1;const e={site_name:t.get("site_name"),site_delivery_address:t.get("site_delivery_address"),official_site_contact:t.get("official_site_contact"),site_contact_first_name:t.get("site_contact_first_name"),site_contact_last_name:t.get("site_contact_last_name"),site_contact_phone:t.get("site_contact_phone"),site_contact_email:t.get("site_contact_email")};let n=[];return Object.entries(e).forEach((([t,e])=>{""!==e&&null!==e||n.push(t)})),0===n.length},s=t=>{if(t instanceof FormData==0)return!1;const e={diesel:t.get("diesel"),gas:t.get("gas"),dyed_diesel:t.get("dyed_diesel"),def:t.get("def")};let n=[];return Object.entries(e).forEach((([e,s])=>{""!==s&&null!==s&&t.get(e+"_qty")>0&&n.push(e)})),n.length>0},a=t=>{if(t instanceof FormData==0)return!1;const e={vehicles:t.get("vehicles"),bulk_tank:t.get("bulk_tank"),construction_equipment:t.get("construction_equipment"),generators:t.get("generators"),reefer:t.get("reefer"),other:t.get("other")};let n=[];return Object.entries(e).forEach((([e,s])=>{""!==s&&null!==s&&t.get(e+"_qty")>0&&n.push(e)})),n.length>0},r=t=>{if(t instanceof FormData==0)return!1;let e={};e="no"===t.get("one_time_delivery")?{one_time_delivery:t.get("one_time_delivery"),day:t.getAll("day"),delivery_date:t.get("delivery_date"),delivery_window:t.get("delivery_window")}:{one_time_delivery:t.get("one_time_delivery"),delivery_date:t.get("delivery_date"),delivery_window:t.get("delivery_window")};let n=[];return Object.entries(e).forEach((([t,e])=>{""!==e&&null!==e&&0!==e.length||n.push(t)})),0===n.length},o=t=>{if(t instanceof FormData==0)return!1;const e={notes:t.get("notes"),images:t.getAll("images")};let n=[];return Object.entries(e).forEach((([t,e])=>{""!==e&&null!==e&&0!==e.length||n.push(t)})),0===n.length},i=t=>{if(t instanceof FormData==0)return!1;const e={payment_method:t.get("payment_method"),pre_authorization_email:t.get("pre_authorization_email")};let n=[];return Object.entries(e).forEach((([t,e])=>{""!==e&&null!==e&&0!==e.length||n.push(t)})),0===n.length},l=(m={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},g={},e.d(g,m),g),{state:c,callbacks:u}=(0,l.store)("fuellogic-app",{state:{get siteName(){const t=(0,l.getContext)();return""==t.formData?"My Site":""!==t.formData.get("site_name")?t.formData.get("site_name"):"My Site"},get next(){const t=(0,l.getContext)();return t.submitBtnStatus[t.currentStep]},get deliveryDate(){const t=(0,l.getContext)().formData.get("delivery_date");return""!==t?t:" "},get isIncomplete(){const t=(0,l.getContext)();return 0===t.submitBtnStatus.length?"block":t.submitBtnStatus[t.currentStep]?"none":"block"},get isNextStep(){const t=(0,l.getContext)();return 0===t.submitBtnStatus.length?"none":t.submitBtnStatus[t.currentStep]&&t.currentStep<6?"block":"none"},get isSubmitOrder(){const t=(0,l.getContext)();return 0===t.submitBtnStatus.length?"none":t.submitBtnStatus[t.currentStep]&&t.currentStep>=6?"block":"none"}},actions:{submitForm:t=>{t.preventDefault(),alert("submitting");const{ref:e}=(0,l.getElement)(),n=(0,l.getContext)(),s=new FormData(e);s.append("action","create_site"),s.append("nonce",c.nonce);const a=fetch(c.ajaxUrl,{method:"POST",body:s}).then((t=>t.json()));n.signup_msg=a.message,n.status=a.status,a.status},submitButton:t=>{const e=(0,l.getContext)();if(e.submitBtnStatus[e.currentStep]){parseInt(e.currentStep);const t=document.getElementsByClassName("active");e.currentStep=parseInt(e.currentStep)+1;const n=document.querySelectorAll(`li[data-step="${e.currentStep}"]`);t[0].classList.remove("active"),n.length>0&&n[0].classList.add("active"),u.init()}}},callbacks:{init:()=>{const t=(0,l.getContext)().currentStep,e=document.getElementsByClassName("step-content");for(let n of e)t==n.dataset.step?n.removeAttribute("hidden"):n.setAttribute("hidden","true")},navigate:()=>{const t=(0,l.getContext)(),e=(0,l.getElement)(),n=document.getElementsByClassName("active"),s=e.ref.dataset.step;t.currentStep=s,n[0].classList.remove("active"),e.ref.classList.add("active"),u.init()},onFormUpdate:()=>{const{ref:t}=(0,l.getElement)(),e=(0,l.getContext)(),n=new FormData(t);e.formData=n;const s=n.get("one_time_delivery");if(null!==s&&(document.getElementsByClassName("delivery-schedule-wrapper")[0].style.display="block"),"yes"===s){const t=document.getElementsByClassName("option2");for(let e=0;e<t.length;e++)t[e].style.display="none";const e=document.getElementsByClassName("option1");for(let t=0;t<e.length;t++)e[t].style.display="flex"}else{const t=document.getElementsByClassName("option1");for(let e=0;e<t.length;e++)t[e].style.display="hidden";const e=document.getElementsByClassName("option2");for(let t=0;t<e.length;t++)e[t].style.display="flex"}u.submitButtonStatus()},onSiteNameChange:()=>{const{ref:t}=(0,l.getElement)();(0,l.getContext)().siteName=t.value},submitButtonStatus:()=>{const t=(0,l.getContext)();switch(parseInt(t.currentStep)){case 1:t.submitBtnStatus={...t.submitBtnStatus,[t.currentStep]:n(t.formData)};break;case 2:t.submitBtnStatus={...t.submitBtnStatus,[t.currentStep]:s(t.formData)};break;case 3:t.submitBtnStatus={...t.submitBtnStatus,[t.currentStep]:a(t.formData)};break;case 4:t.submitBtnStatus={...t.submitBtnStatus,[t.currentStep]:r(t.formData)};break;case 5:t.submitBtnStatus={...t.submitBtnStatus,[t.currentStep]:o(t.formData)};break;case 6:t.submitBtnStatus={...t.submitBtnStatus,[t.currentStep]:i(t.formData)}}}}});var m,g;